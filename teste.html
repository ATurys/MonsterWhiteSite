<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #fundoLataMonster {
        height: 300px;
        width: 300px;

        
        display: flex;
        
        position: absolute;

        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 9;
    }

    #fundoLataMonsterInterno {
        height: 100%;
        width: 100%;

        position: absolute;
        border-radius: 15px;
        background-color: #1C2D34;
        box-shadow: 4px 4px 20px 10px #4A727E;
        transition: box-shadow 0.15s ease-out;
    }

    #fundoLataMonster > div#fundoLataMonsterInterno > img{
        margin: -30% 10% 10% 18%;
        height: 140%;

        position: relative;
        z-index: 3;
    }
    </style>
</head>
<body>
    <div id="fundoLataMonster">
        <div id="fundoLataMonsterInterno">
            <img src="imagens/lataMonsterWhite.png" alt="Imagem da lata de monster">
        </div>
        
    </div>
</body>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        var fundoImg = document.getElementById("fundoLataMonsterInterno");
        let animationFrameId = null; //Define o frame inicial
        let mouseX = 0; // Posição inicial do eixo Y do mouse
        let mouseY = 0; // Posição inicial do eixo Y do mouse
        function movimentoMouseFundoIMG(e){
            //posição do mouse na tela
            console.log("Mouse se moveu!");
            mouseX = e.clientX
            mouseY = e.clientY

            //Isso evita que a função seja chamada a todo movimento, sendo chamada apenas em um frame novo no site, reduzindo o consumo computacional [De acordo com o Gemini]
            if (!animationFrameId) {
                animationFrameId = requestAnimationFrame(atualizarShadowBoxFundoImg)
            }
        }
        function atualizarShadowBoxFundoImg() {
            //atenuação pela posição do mouse
            console.log("Atualizando sombra!");
            let atenuacao = 0.5;

            //posição da div em relação ao centro da tela
            let posicaoDiv = fundoImg.getBoundingClientRect()
            let posicaoDivX = posicaoDiv.left + posicaoDiv.width / 2;
            let posicaoDivY = posicaoDiv.top + posicaoDiv.height / 2;

            //calcula a diferença entre o mouse e a posição da div
            let deltaX = mouseX - posicaoDivX
            let deltaY = mouseY - posicaoDivY

            //define a nova posição da box-shadow em posição oposta a posição do mouse
            let posicaoSombraNovaX = -deltaX * atenuacao; 
            let posicaoSombraNovaY = -deltaY * atenuacao;
            
            //Limita o quanto a box-shadow pode se mover (evita q fique muito para fora)
            const limite = 20;
            posicaoSombraNovaX = Math.max(-limite, Math.min(limite, posicaoSombraNovaX));
            posicaoSombraNovaY = Math.max(-limite, Math.min(limite, posicaoSombraNovaY));

    
            const blur = 20;
            const spreadBoxShadow = 0;
            const boxShadowCor = "#4A727E"

            
            fundoImg.style.boxShadow = `${posicaoSombraNovaX}px ${posicaoSombraNovaY}px ${blur}px ${spreadBoxShadow}px ${boxShadowCor}`;

            animationFrameId = null;
            
        }
    document.addEventListener("mousemove", movimentoMouseFundoIMG);

        window.addEventListener('resize', () => {
            if (!animationFrameId) {
                animationFrameId = requestAnimationFrame(atualizarShadowBoxFundoImg);
            }
        });
    });
</script>

</html>